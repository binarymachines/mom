<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://editorCaption"
        class="com.angrysurfer.mildred.web.service.serviceprofile.ServiceProfileEdit"
        datasource="serviceProfileDs"
        focusComponent="fieldGroup"
        messagesPack="com.angrysurfer.mildred.web.service.serviceprofile">
    <dsContext>
        <datasource id="serviceProfileDs"
                    class="com.angrysurfer.mildred.entity.service.ServiceProfile"
                    view="serviceProfile-view">
            <collectionDatasource id="serviceDispatchesDs"
                                  property="serviceDispatches"/>
            <collectionDatasource id="modesDs"
                                  property="modes"/>
            <collectionDatasource id="switchRulesDs"
                                  property="switchRules"/>
            <datasource id="startupServiceDispatchDs"
                        property="startupServiceDispatch"/>
        </datasource>
    </dsContext>
    <dialogMode height="600"
                width="800"/>
    <layout expand="serviceDispatchesBox"
            spacing="true">
        <hbox spacing="true">
            <fieldGroup id="fieldGroup"
                        datasource="serviceProfileDs">
                <column>
                    <field caption="Name"
                           property="name"/>
                </column>
            </fieldGroup>
            <fieldGroup datasource="startupServiceDispatchDs">
                <column>
                    <field caption="msg://name"
                           property="name"/>
                </column>
                <column>
                    <field caption="msg://packageName"
                           property="packageName"/>
                </column>
                <column>
                    <field caption="msg://moduleName"
                           property="moduleName"/>
                </column>
                <column>
                    <field caption="msg://className"
                           property="className"/>
                </column>
            </fieldGroup>
        </hbox>
        <grid spacing="true"
              width="100%">
            <columns count="3"/>
            <rows>
                <row>
                    <groupBox id="modesBox"
                              caption="Modes">
                        <table id="modesTable"
                               height="400px"
                               width="100%">
                            <actions>
                                <action id="add"
                                        openType="DIALOG"/>
                                <action id="remove"/>
                                <action id="create"
                                        openType="DIALOG"/>
                                <action id="edit"
                                        openType="DIALOG"/>
                            </actions>
                            <columns>
                                <column id="name"
                                        caption="Mode"/>
                                <column id="statefulFlag"
                                        caption="Stateful"
                                        visible="false"/>
                            </columns>
                            <rows datasource="modesDs"/>
                            <buttonsPanel>
                                <button action="modesTable.add"/>
                                <button action="modesTable.remove"/>
                                <button action="modesTable.create"/>
                                <button action="modesTable.edit"/>
                            </buttonsPanel>
                        </table>
                    </groupBox>
                    <groupBox id="switchRulesBox"
                              caption="Switch Rules"
                              colspan="2">
                        <table id="switchRulesTable"
                               height="400px"
                               width="100%">
                            <actions>
                                <action id="add"/>
                                <action id="remove"/>
                                <action id="create"
                                        openType="DIALOG"/>
                                <action id="edit"
                                        openType="DIALOG"/>
                            </actions>
                            <columns>
                                <column id="name"/>
                                <column id="beginMode"/>
                                <column id="endMode"/>
                                <column id="conditionDispatch"/>
                            </columns>
                            <rows datasource="switchRulesDs"/>
                            <buttonsPanel>
                                <button action="switchRulesTable.add"/>
                                <button action="switchRulesTable.remove"/>
                                <button action="switchRulesTable.create"/>
                                <button action="switchRulesTable.edit"/>
                            </buttonsPanel>
                        </table>
                    </groupBox>
                </row>
                <row/>
            </rows>
        </grid>
        <groupBox id="serviceDispatchesBox"
                  caption="Dispatch Table">
            <table id="serviceDispatchesTable"
                   height="100%"
                   width="100%">
                <actions>
                    <action id="add"/>
                    <action id="remove"/>
                    <action id="create"
                            openType="DIALOG"/>
                    <action id="edit"/>
                </actions>
                <columns>
                    <column id="name"
                            caption="Name"/>
                    <column id="category"
                            caption="Category"/>
                    <column id="packageName"
                            caption="Package"/>
                    <column id="moduleName"
                            caption="Module"/>
                    <column id="className"
                            caption="Class"/>
                    <column id="funcName"
                            caption="Function"/>
                </columns>
                <rows datasource="serviceDispatchesDs"/>
                <buttonsPanel>
                    <button action="serviceDispatchesTable.add"/>
                    <button action="serviceDispatchesTable.remove"/>
                    <button action="serviceDispatchesTable.create"/>
                    <button action="serviceDispatchesTable.edit"/>
                </buttonsPanel>
            </table>
        </groupBox>
        <frame id="windowActions"
               align="BOTTOM_RIGHT"
               screen="editWindowActions"
               width="AUTO"/>
    </layout>
</window>
